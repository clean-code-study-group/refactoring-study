# CHAPTER 01

# 리팩터링: 첫 번째 예시

## 1.3 리팩터링의 첫 단계

- [x] 리팩터링하기 전에 제대로 된 테스트부터 마련한다. 테스트는 반드시 자가진단하도록 만든다. _테스트 마련하여 디버깅 시간 줄이기_

## 1.4 statement() 함수 쪼개기

- [x] 긴 함수를 리팩터링할 때는 먼저 전체 동작을 각각의 부분으로 나눌 수 있는 지점을 찾아 쪼갠다. _함수 추출하기_
  - [x] 부분 찾아서 함수 추출
  - [x] 변수명 하는 일이 명확히 드러나도록 변경
  - [x] 임시 변수 제거 _임시 변수를 질의 함수로 바꾸기_
  - [x] 인라인된 변수 제거 _변수 인라인하기_

## 1.5 중간 점검: 난무하는 중첩 함수

## 1.6 계산 단계와 포맷팅 단계 분리하기
- [ ] statement()의 로직을 두 단계로 나눈다. _단계 쪼개기_
  - [ ] 두 번째 단계가 될 코드들을 함수 추출 _함수 추출하기_
- [ ] 반복문을 파이프라인으로 바꾸기
- [ ] statement()에 필요한 데이터 처리에 해당하는 코드를 모두 별도 함수로 빼내기
- [ ] 별도파일 저장

## 1.7 중간 점검: 두 파일(과 두 단계)로 분리됨

## 1.8 다형성을 활용해 계산 코드 재구성하기
- [ ] 조건부 로직을 다형성으로 바꾸기
  - [ ] 상속계층 정의
    - [ ] 공연료 계산기 만들기
    - [ ] 함수 선언 바꾸기
    - [ ] 함수들을 계산기로 옮기기 _함수 옮기기_
    - [ ] 함수 인라인
  - [ ] 공연료 계산기를 다형성 버전으로 만들기
    - [ ] 서브클래스를 사용하도록 변경 _타입 코드를 서브클래스로 바꾸기_
    - [ ] 생성자 대신 함수를 호출하도록 변경 _생성자를 팩터리 함수로 바꾸기_

## 1.9 상태 점검: 다형성을 활용하여 데이터 생성하기

## 1.10 마치며
- 함수 추출하기
- 변수 인라인하기
- 함수 옮기기
- 조건부 로직을 다형성으로 바꾸기